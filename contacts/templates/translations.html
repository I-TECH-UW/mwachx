{% extends 'base.html' %} {% load staticfiles %}{% block title %}Translations{% endblock %} {% block content %}
<div class='col-full'>
    <div class="page-content">
    	<div class="row">
	        <h3>Pending translations</h3>
    	</div>
    	<div class="row">
	        <table id="translations-table" class="table table-striped table-hover table-condensed">
	            <thead>
	                <tr>
	                    <th></th>
	                    <th>From</th>
	                    <th>Original text</th>
	                    <th>Translated text</th>
	                    <th></th>
	                </tr>
	            </thead>
	            <tbody class="rowlink" data-link='row'>
	                {% for message in to_translate_list %}
	                <tr class="link-row">
	                	<td>{% if message.html_class == 'nurse' %}<i class="fa fa-user-md fa-3x avatar-nurse"></i>{% else %}<i class="mw mw-mwach-phone fa-3x avatar-participant"></i>{% endif %}</td>
	                    <td><strong>{% if message.html_class == "client" %}{{message.contact.nickname}}{% else %}YOU{% endif %}</strong><br>
	                        <div class="btn-group" data-toggle="buttons" id="lang{{forloop.counter}}" >
	                        	{% for l in langs %}
									<label onclick="mark_dirty()" class="btn btn-language btn-sm {% if l.id in message.lang_ids %}active{% endif %}" data-toggle="tooltip" data-placement="top" title="{{l.name}}"><input  name='{{l.name}}' type="checkbox" autocomplete="off"
	                        		{% if l.id in message.lang_ids %}
		                        		checked="true"
	                        		{% else %}
	                        			checked="false"
	                        		{% endif %}
									>{{l.short_name}}</label>
								{% endfor %}
	                        </div><br>

	                    </td>
	                    <td>{{message.text}}</td>
	                    <td>
	                    {% if message.translation %}
		                    <div onkeydown="mark_dirty()" contenteditable="true" id="translated{{forloop.counter}}">{{message.translation.text}}</div>
	                    {% else %}
	                    	<div onkeydown="mark_dirty()" contenteditable="true" id="translated{{forloop.counter}}">{{message.text}}</div>
	                    {% endif %}
	                    </td>
	                    <td>
		                    <button class="btn btn-success">Done</button>
		                    <button class="btn btn-danger" onclick="not_required()" data-count='{{forloop.counter}}'>Not required</button>
		                    <h4 id="languageError{{forloop.counter}}" class="text-danger" style="display: none;">Select at least one language</h4>
		                    <h4 id="transError{{forloop.counter}}" class="text-danger" style="display: none;">Must enter translation</h4>
	                    </td>
	                </tr>
	                {% endfor %}
	            </tbody>
	        </table>
    	</div>
	</div>
</div>

<script type="text/javascript" src='{% static "js/translations.js" %}'></script>
<script type="text/javascript">
// TODO: Move this somewhere smarter.
$(function () {
  $('[data-toggle="tooltip"]').tooltip()
});</script>

{% endblock %}
