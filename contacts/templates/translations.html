{% extends 'base.html' %} {% load staticfiles %}{% block title %}Translations{% endblock %} {% block content %}
<div class='col-full'>
    <div class="page-content">
    	<div class="row">
	        <h3>Pending translations</h3>
    	</div>
    	<div class="row">
	        <table id="translations-table" class="table table-striped table-hover table-condensed">
	        	{% csrf_token %}
	            <thead>
	                <tr>
	                    <th></th>
	                    <th>From</th>
	                    <th>Original text</th>
	                    <th>Translated text</th>
	                    <th></th>
	                </tr>
	            </thead>
	            <tbody class="rowlink" data-link='row'>
	                {% for message in to_translate_list %}
	                <tr class="link-row">
	                	<td>{% if message.html_class == 'nurse' %}<i class="mw mw-user-md mw-3x avatar-nurse"></i>{% else %}<i class="mw mw-mwach-phone mw-3x avatar-participant"></i>{% endif %}</td>
	                	<!-- TODO: Update "you" to the logged in name?? -->
	                    <td><strong>{% if message.html_class == "client" %}{{message.contact.nickname}}{% else %}YOU{% endif %}</strong><br>
	                        <div class="btn-group" data-toggle="buttons" id="lang{{message.id}}" >
	                        	{% for l in langs %}
									<label onclick="mark_dirty()" class="btn btn-language btn-sm {% if l.id in message.lang_ids %}active{% endif %}" data-toggle="tooltip" data-placement="top" title="{{l.name}}"><input  name='{{l.name}}' type="checkbox" autocomplete="off" value="{{l.id}}"
	                        		{% if l.id in message.lang_ids %}checked{% endif %}
									>{{l.short_name}}</label>
								{% endfor %}
	                        </div><br>

	                    </td>
	                    <td><div class="textblob" id="original{{message.id}}">{{message.text}}</div></td>
	                    <td>
	                    {% if message.translation %}
		                    <div class="textblob" onkeydown="mark_dirty()" contenteditable="true" id="translated{{message.id}}">{{message.translation.text}}</div>
	                    {% else %}
	                    	<div class="textblob" onkeydown="mark_dirty()" contenteditable="true" id="translated{{message.id}}">{{message.text}}</div>
	                    {% endif %}
	                    </td>
	                    <td>
		                    <button class="btn btn-info" onclick="save_translation()" data-count='{{message.id}}'>Translated</button>
		                    <button class="btn btn-danger" onclick="not_required()" data-count='{{message.id}}'>Not required</button>
		                    <h4 id="languageError{{message.id}}" class="text-danger" style="display: none;">Select at least one language</h4>
		                    <h4 id="transError{{message.id}}" class="text-danger" style="display: none;">Translation must be same as original.</h4>
		                    <h4 id="transSameError{{message.id}}" class="text-danger" style="display: none;">Translation must be different than original.</h4>
	                    </td>
	                </tr>
	                {% endfor %}
	            </tbody>
	        </table>
    	</div>
	</div>
</div>

<script type="text/javascript" src='{% static "js/translations.js" %}'></script>
{% endblock %}
